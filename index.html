<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ThinSkin</title>

<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: radial-gradient(circle at top, #0f172a, #020617);
    color: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }

  .card {
    width: 90%;
    max-width: 420px;
    background: rgba(15, 23, 42, 0.85);
    border-radius: 20px;
    padding: 28px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    text-align: center;
  }

  h1 {
    margin: 0 0 10px;
    font-size: 28px;
  }

  .subtitle {
    opacity: 0.7;
    margin-bottom: 24px;
  }

  .challenge {
    font-size: 20px;
    margin: 24px 0;
    line-height: 1.4;
  }

  button {
    background: #1e293b;
    color: white;
    border: none;
    padding: 14px 20px;
    border-radius: 12px;
    font-size: 16px;
    cursor: pointer;
    width: 100%;
  }

  button:hover {
    background: #334155;
  }

  .small {
    margin-top: 18px;
    font-size: 13px;
    opacity: 0.65;
    line-height: 1.4;
  }

  .links {
    margin-top: 14px;
    font-size: 14px;
  }

  .links a {
    color: #93c5fd;
    text-decoration: none;
    margin: 0 6px;
  }

  .locked {
    opacity: 0.5;
  }
</style>
</head>

<body>

<div class="card">
  <h1>ThinSkin</h1>
  <div class="subtitle">Daily discomfort experiment</div>

  <div id="content"></div>

  <div class="links">
    <a href="#" onclick="showPrivacy()">Privacy</a> Â·
    <a href="#" onclick="showDisclaimer()">Disclaimer</a>
  </div>

  <div class="small" id="footerText">
    Experimental project.<br>
    No medical or therapy advice.
  </div>
</div>

<script>
/* ===============================
   SAFE STORAGE
================================ */
const today = new Date().toDateString();
const data = JSON.parse(localStorage.getItem("thinskin") || "{}");

if (!data.startDate) {
  data.startDate = Date.now();
  data.completed = [];
}

const dayCount = Math.floor((Date.now() - data.startDate) / 86400000) + 1;
const isPremiumLocked = dayCount > 7;

/* ===============================
   CHALLENGE GENERATOR (200+)
================================ */
function generateChallenges() {
  const base = [
    "Ask a question you already know the answer to.",
    "Pause for 3 seconds before responding to someone.",
    "Admit you misunderstood something.",
    "Let silence exist without filling it.",
    "Say 'I might be wrong' once today.",
    "Give a short, honest opinion without explaining it.",
    "Receive feedback without defending yourself.",
    "Repeat back what someone said instead of replying.",
    "Notice discomfort without fixing it.",
    "Do nothing for one full minute."
  ];

  const variations = [
    "in a casual conversation",
    "during a routine interaction",
    "without adding context",
    "without apologizing",
    "and sit with the feeling",
    "without explaining yourself",
    "even if it feels awkward",
    "without seeking reassurance",
    "and observe your reaction",
    "without trying to be liked"
  ];

  const challenges = [];

  for (let i = 0; i < base.length; i++) {
    for (let j = 0; j < variations.length; j++) {
      challenges.push(base[i] + " " + variations[j] + ".");
    }
  }

  // Advanced (locked after day 7)
  const advanced = [];
  for (let i = 1; i <= 80; i++) {
    advanced.push("Advanced: allow a moment of visible uncertainty and do not resolve it immediately.");
  }

  return { normal: challenges, advanced };
}

const allChallenges = generateChallenges();

/* ===============================
   DAILY CHALLENGE LOGIC
================================ */
if (!data.daily || data.daily.date !== today) {
  const used = new Set(data.completed);
  const pool = allChallenges.normal.filter(c => !used.has(c));

  const selected = pool[Math.floor(Math.random() * pool.length)];

  data.daily = { date: today, challenge: selected };
  localStorage.setItem("thinskin", JSON.stringify(data));
}

const content = document.getElementById("content");

/* ===============================
   UI STATES
================================ */
if (data.completed.includes(data.daily.challenge)) {
  content.innerHTML = `
    <div class="challenge">Done for today.</div>
    <div class="subtitle">Come back tomorrow.</div>
  `;
} else {
  content.innerHTML = `
    <div class="challenge">${data.daily.challenge}</div>
    <button onclick="complete()">I did it</button>
  `;
}

function complete() {
  data.completed.push(data.daily.challenge);
  localStorage.setItem("thinskin", JSON.stringify(data));
  location.reload();
}

/* ===============================
   PRIVACY & DISCLAIMER
================================ */
function showPrivacy() {
  alert(
    "Privacy Policy:\n\n" +
    "This app stores minimal data locally on your device only (progress and dates).\n" +
    "No accounts. No tracking. No analytics. No data is transmitted or shared."
  );
}

function showDisclaimer() {
  alert(
    "Disclaimer:\n\n" +
    "This is an experimental personal project.\n" +
    "Not medical advice. Not therapy. Not professional guidance.\n" +
    "No guarantees. Participate voluntarily.\n" +
    "Stop if uncomfortable or unsafe."
  );
}
</script>

</body>
</html>