<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BOMBO – Independent Offer Integrity Check</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f1220;
  color: #fff;
  margin: 0;
  padding: 24px;
}

h1 { margin-bottom: 4px; }
.subtitle { color: #aaa; margin-bottom: 20px; }

.panel {
  background: #161a33;
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 20px;
}

label {
  display: block;
  margin: 10px 0 6px;
  font-size: 14px;
  color: #ccc;
}

textarea, select, button {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  font-size: 14px;
}

textarea {
  resize: vertical;
  min-height: 80px;
}

button {
  background: #4f7cff;
  color: white;
  font-weight: 600;
  cursor: pointer;
  margin-top: 14px;
}

.score {
  font-size: 48px;
  font-weight: 700;
}

.green { color: #5dff9b; }
.yellow { color: #ffd45d; }
.red { color: #ff6b6b; }

.badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  margin-right: 6px;
  margin-bottom: 6px;
}

.badge.green { background: #1e6f4a; }
.badge.yellow { background: #6f5a1e; }
.badge.red { background: #6f1e1e; }

ul {
  padding-left: 18px;
  margin-top: 8px;
}

details {
  background: #12162b;
  border-radius: 8px;
  padding: 10px;
  margin-top: 10px;
}

summary {
  cursor: pointer;
  font-weight: 600;
  color: #9fb3ff;
}

footer {
  margin-top: 30px;
  font-size: 12px;
  color: #777;
  text-align: center;
}
</style>
</head>

<body>

<h1>BOMBO</h1>
<div class="subtitle">
Independent Offer Integrity Check – no tracking, no affiliation, no influence
</div>

<div class="panel">
  <label>Offer description (visible to user)</label>
  <textarea id="offerText" placeholder="Example: 70% OFF – Only today! No refunds."></textarea>

  <label>Discount claim</label>
  <select id="discount">
    <option value="none">No discount</option>
    <option value="weak">Unverifiable discount</option>
    <option value="strong">Verifiable discount</option>
  </select>

  <label>Urgency / scarcity</label>
  <select id="urgency">
    <option value="none">None</option>
    <option value="soft">Soft urgency language</option>
    <option value="hard">Artificial urgency / countdown</option>
  </select>

  <label>Transparency of terms</label>
  <select id="transparency">
    <option value="clear">Clear terms</option>
    <option value="partial">Partially unclear</option>
    <option value="opaque">Hidden / missing terms</option>
  </select>

  <label>Affiliate opacity</label>
  <select id="affiliate">
    <option value="clean">No redirect masking</option>
    <option value="masked">Masked / chained redirect</option>
  </select>

  <button onclick="runCheck()">Run Integrity Check</button>
</div>

<div class="panel" id="result" style="display:none;">
  <div class="score" id="score"></div>
  <div id="level"></div>

  <h3>Detected Signals</h3>
  <div id="signals"></div>

  <h3>Explanation</h3>
  <ul id="explanations"></ul>

  <!-- AUDIT LOG -->
  <details>
    <summary>Audit Log (verifiable)</summary>
    <ul id="auditLog"></ul>
  </details>

  <!-- EXPORT -->
  <details>
    <summary>Export – Legal / Compliance</summary>
    <pre id="exportBox" style="white-space:pre-wrap;"></pre>
  </details>

  <!-- OPEN SPEC -->
  <details>
    <summary>Open Rule Specification</summary>
    <pre>
Base score: 100

Rules (deterministic):
- Unverifiable discount: -15
- Soft urgency language: -8
- Artificial urgency / countdown: -15
- Partial transparency: -10
- Opaque terms: -20
- Affiliate redirect masking: -5
- Emotional exaggeration keywords: -5

No weighting.
No learning.
No personalization.
Same input = same output.
    </pre>
  </details>
</div>

<footer>
<strong>Disclaimer:</strong> BOMBO provides informational integrity signals only.
It does not verify legality, pricing accuracy, product quality, or merchant behavior.
No financial, legal, or purchasing advice is given.<br><br>

<strong>Privacy:</strong> This application performs all analysis locally in the browser.
No data is stored, transmitted, tracked, or shared. No cookies. No identifiers.
</footer>

<script>
function runCheck() {
  let score = 100;
  const signals = [];
  const explanations = [];
  const audit = [];

  const discount = discountEl().value;
  const urgency = urgencyEl().value;
  const transparency = transparencyEl().value;
  const affiliate = affiliateEl().value;
  const text = textEl().value.toLowerCase();

  function log(rule, penalty) {
    audit.push(`${rule} → ${penalty}`);
  }

  if (discount === "weak") {
    score -= 15;
    signals.push("Unverifiable discount");
    explanations.push("Discount claimed without objective reference.");
    log("Unverifiable discount", "-15");
  }

  if (urgency === "soft") {
    score -= 8;
    signals.push("Soft urgency language");
    explanations.push("Time pressure wording detected.");
    log("Soft urgency language", "-8");
  }

  if (urgency === "hard") {
    score -= 15;
    signals.push("Artificial urgency / scarcity");
    explanations.push("Countdown or scarcity pressure detected.");
    log("Artificial urgency", "-15");
  }

  if (transparency === "partial") {
    score -= 10;
    signals.push("Partial transparency");
    explanations.push("Some terms are unclear.");
    log("Partial transparency", "-10");
  }

  if (transparency === "opaque") {
    score -= 20;
    signals.push("Opaque conditions");
    explanations.push("Key terms or refunds missing.");
    log("Opaque conditions", "-20");
  }

  if (affiliate === "masked") {
    score -= 5;
    signals.push("Affiliate redirect masking");
    explanations.push("Redirect structure obscures destination.");
    log("Affiliate masking", "-5");
  }

  if (text.includes("only today") || text.includes("best ever")) {
    score -= 5;
    signals.push("Emotional exaggeration");
    explanations.push("Subjective exaggeration detected.");
    log("Emotional exaggeration", "-5");
  }

  score = Math.max(0, score);

  let level = "High Integrity", color = "green";
  if (score < 80) { level = "Moderate Integrity"; color = "yellow"; }
  if (score < 50) { level = "Low Integrity"; color = "red"; }

  show("result");

  setScore(score, color, level);
  renderBadges("signals", signals, color);
  renderList("explanations", explanations);
  renderList("auditLog", audit);

  document.getElementById("exportBox").textContent =
`Integrity Score: ${score}
Level: ${level}

Detected signals:
${audit.join("\n")}

Methodology:
Deterministic, rule-based, non-learning.
No tracking. No personalization.`;
}

function discountEl(){return document.getElementById("discount")}
function urgencyEl(){return document.getElementById("urgency")}
function transparencyEl(){return document.getElementById("transparency")}
function affiliateEl(){return document.getElementById("affiliate")}
function textEl(){return document.getElementById("offerText")}

function show(id){document.getElementById(id).style.display="block"}

function setScore(score,color,level){
  const s=document.getElementById("score");
  s.textContent=score;
  s.className="score "+color;
  document.getElementById("level").innerHTML=
    `<span class="badge ${color}">${level}</span>`;
}

function renderBadges(id,list,color){
  const el=document.getElementById(id);
  el.innerHTML="";
  list.forEach(i=>el.innerHTML+=`<span class="badge ${color}">${i}</span>`);
}

function renderList(id,list){
  const el=document.getElementById(id);
  el.innerHTML="";
  list.forEach(i=>{
    const li=document.createElement("li");
    li.textContent=i;
    el.appendChild(li);
  });
}
</script>

</body>
</html>