<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Focus</title>

<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;Focus&quot;,
  &quot;short_name&quot;:&quot;Focus&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#0f1220&quot;,
  &quot;theme_color&quot;:&quot;#0f1220&quot;
}">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f1220;
  color: #fff;
  padding: 20px;
  text-align: center;
}

h1 {
  font-size: 22px;
  opacity: 0.85;
}

.card {
  background: #1a1f3a;
  padding: 20px;
  border-radius: 16px;
  margin-top: 20px;
}

input, button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
}

button {
  font-weight: bold;
  background: #2f3cff;
  color: #fff;
}

.row {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.row button {
  flex: 1;
}

.green { background:#1e7f43; }
.red { background:#8b1e1e; }
.yellow { background:#b58b00; }

.lock {
  background:#000;
  color:#ff4d4d;
}
</style>
</head>

<body>

<h1>Focus</h1>

<div class="card">
  <input type="number" id="start" placeholder="Valoare inițială">
  <input type="number" id="target" placeholder="Limită superioară">
  <input type="number" id="stoploss" placeholder="Limită inferioară">
  <button onclick="start()">Start</button>
</div>

<div class="card" id="panel" style="display:none">
  <h2 id="balance">0</h2>

  <div class="row">
    <button onclick="change(5)">+5</button>
    <button onclick="change(10)">+10</button>
    <button onclick="change(20)">+20</button>
  </div>

  <div class="row">
    <button onclick="change(-5)">-5</button>
    <button onclick="change(-10)">-10</button>
    <button onclick="change(-20)">-20</button>
  </div>

  <div id="status" class="card yellow" style="margin-top:15px">
    Monitorizare activă
  </div>
</div>

<script>
let startValue = 0;
let value = 0;
let target = 0;
let stoploss = 0;
let locked = false;

function start() {
  startValue = Number(start.value);
  target = Number(targetInput.value = target?.value);
}

const targetInput = document.getElementById("target");
const stopInput = document.getElementById("stoploss");

function start() {
  startValue = Number(document.getElementById("start").value);
  target = Number(document.getElementById("target").value);
  stoploss = Number(document.getElementById("stoploss").value);

  if (!startValue || target <= 0 || stoploss <= 0) {
    alert("Valori invalide");
    return;
  }

  value = startValue;
  locked = false;
  document.getElementById("balance").innerText = value.toFixed(2);
  document.getElementById("panel").style.display = "block";
  update();
}

function change(amount) {
  if (locked) return;
  value += amount;
  document.getElementById("balance").innerText = value.toFixed(2);
  update();
}

function update() {
  const diff = value - startValue;
  const status = document.getElementById("status");

  if (diff >= target) {
    lock("Limită superioară atinsă");
  } else if (diff <= -stoploss) {
    lock("Limită inferioară atinsă");
  } else {
    status.className = "card yellow";
    status.innerText = "În parametri";
  }
}

function lock(message) {
  locked = true;
  const status = document.getElementById("status");
  status.className = "card lock";
  status.innerHTML = message + "<br>SESIUNE ÎNCHEIATĂ";
  if (navigator.vibrate) navigator.vibrate([300,200,300]);
}
</script>

</body>
</html>