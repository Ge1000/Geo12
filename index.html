<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ”¥ Smart Bet Detector PRO+</title>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

<style>
body{
    font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
    background:#0f1220;
    color:#fff;
    text-align:center;
    padding:20px;
}
button{
    background:#00ff88;
    border:none;
    padding:12px 20px;
    font-size:16px;
    font-weight:bold;
    border-radius:8px;
    cursor:pointer;
    margin-top:10px;
}
.result{
    margin-top:20px;
    text-align:left;
    background:#1a1f38;
    padding:15px;
    border-radius:10px;
}
.match{
    margin-bottom:15px;
    padding:10px;
    background:#11152a;
    border-radius:8px;
}
h1{color:#00ff88;}
.conf{color:#00ff88;font-weight:bold;}
</style>
</head>

<body>

<h1>ðŸ”¥ Smart Bet Detector PRO+</h1>

<input type="file" id="imageInput" accept="image/*">
<br>
<button onclick="scanImage()">ScaneazÄƒ</button>

<div id="output" class="result">
Meciuri Detectate
</div>

<script>

async function scanImage(){

    const file = document.getElementById("imageInput").files[0];
    if(!file) return alert("SelecteazÄƒ o imagine");

    document.getElementById("output").innerHTML="â³ Scanare Ã®n curs...";

    const { data:{ text } } = await Tesseract.recognize(
        file,
        'eng',
        { logger:m=>console.log(m) }
    );

    console.log("OCR TEXT:", text);

    const matches = parseMatches(text);

    displayMatches(matches);
}



function parseMatches(text){

    let lines = text
        .split("\n")
        .map(l=>l.trim())
        .filter(l=>l.length>0);

    let matches=[];

    for(let i=0;i<lines.length;i++){

        if(
            lines[i].match(/^\d+\.\d+$/) &&
            lines[i+1]?.match(/^\d+\.\d+$/) &&
            lines[i+2]?.match(/^\d+\.\d+$/)
        ){

            let o1=parseFloat(lines[i]);
            let oX=parseFloat(lines[i+1]);
            let o2=parseFloat(lines[i+2]);

            let teams=[];

            for(let j=i-1;j>=0;j--){
                if(
                    !lines[j].match(/^\d/) &&
                    lines[j].toLowerCase()!=="egal" &&
                    lines[j].toLowerCase()!=="meci"
                ){
                    teams.unshift(lines[j]);
                }
                if(teams.length===2) break;
            }

            if(teams.length===2){
                matches.push({
                    home:teams[0],
                    away:teams[1],
                    odds:[o1,oX,o2]
                });
            }
        }
    }

    return matches;
}



function calculateConfidence(odds){

    let probs = odds.map(o=>1/o);
    let total = probs.reduce((a,b)=>a+b,0);
    probs = probs.map(p=>p/total);

    let maxProb = Math.max(...probs);
    return (maxProb*100).toFixed(2);
}



function getRecommendation(match){

    let probs = match.odds.map(o=>1/o);
    let total = probs.reduce((a,b)=>a+b,0);
    probs = probs.map(p=>p/total);

    let maxIndex = probs.indexOf(Math.max(...probs));

    if(maxIndex===0) return match.home;
    if(maxIndex===1) return "Egal";
    if(maxIndex===2) return match.away;
}



function displayMatches(matches){

    let output=document.getElementById("output");

    if(matches.length===0){
        output.innerHTML="<h2>Meciuri Detectate</h2>Nu s-au detectat meciuri valide.";
        return;
    }

    let html="<h2>Meciuri Detectate</h2>";

    matches.forEach(m=>{

        let rec=getRecommendation(m);
        let conf=calculateConfidence(m.odds);

        html+=`
        <div class="match">
        ${m.home} vs ${m.away}<br>
        Cote: ${m.odds[0]} / ${m.odds[1]} / ${m.odds[2]}<br>
        ðŸ”¥ Recomandare Smart: ${rec}<br>
        <span class="conf">Scor Ã®ncredere: ${conf}%</span>
        </div>
        `;
    });

    output.innerHTML=html;
}

</script>

</body>
</html>