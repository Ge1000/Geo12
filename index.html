<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DealScope ‚Äì Opportunity Scanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
:root{
  --bg:#0f1220;
  --panel:#161a33;
  --panel2:#1d2245;
  --text:#fff;
}
.light{
  --bg:#f5f7fb;
  --panel:#ffffff;
  --panel2:#e5e7eb;
  --text:#111;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:var(--bg);
  color:var(--text);
  margin:0;
  padding:20px;
}

h1 { margin-bottom:5px; }
.subtitle { color:#aaa; margin-bottom:10px; }

.status { font-size:12px; color:#9ca3af; margin-bottom:15px; }

button {
  padding:8px 12px;
  border-radius:6px;
  border:none;
  cursor:pointer;
  background:#4f7cff;
  color:white;
}

.buy-btn {
  background:#22c55e;
  color:#000;
  font-weight:600;
}

.toggle {
  float:right;
  background:#334155;
  font-size:12px;
}

table {
  width:100%;
  border-collapse:collapse;
  background:var(--panel);
  border-radius:8px;
  overflow:hidden;
}

th, td {
  padding:12px;
  border-bottom:1px solid #2a2f55;
  white-space:nowrap;
}

th { background:var(--panel2); cursor:pointer; }

tr:hover { background:#1b2050; }

.green { color:#22c55e; }

.badge {
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  font-weight:600;
}

.badge.ai { background:#2563eb; color:#fff; }
.badge.top { background:#22c55e; color:#000; }

.top-pick-row { background:rgba(34,197,94,0.15); }

.stats {
  margin:15px 0;
  padding:10px;
  background:var(--panel);
  border-radius:8px;
  font-size:14px;
}

footer {
  margin-top:30px;
  color:#777;
  font-size:12px;
  text-align:center;
}

#landing { text-align:center; margin-top:60px; }
#app { display:none; }
</style>
</head>

<body>

<div id="landing">
  <h1>DealScope</h1>
  <p class="subtitle">AI-assisted scanner for underpriced digital products</p>
  <button onclick="enterApp()">Launch Scanner</button>
  <p class="status">Demo ¬∑ Affiliate model ¬∑ Info only</p>
</div>

<div id="app">
<button class="toggle" onclick="toggleTheme()">Toggle theme</button>
<h1>DealScope</h1>
<div class="subtitle">Underpriced digital products ‚Äì scanned & compared</div>
<div class="status" id="scanStatus">üîÑ Scanning‚Ä¶</div>

<div class="stats" id="revenueStats"></div>

<table>
<thead>
<tr>
  <th>Product</th>
  <th>Buy</th>
  <th>Source</th>
  <th>Sell</th>
  <th>Profit</th>
  <th>AI</th>
  <th>‚≠ê</th>
  <th>Action</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<footer>
Some links are affiliate links. No financial advice.
</footer>
</div>

<script>
/* ===== THEME ===== */
const savedTheme = localStorage.getItem("theme");
if(savedTheme==="light") document.body.classList.add("light");

function toggleTheme(){
  document.body.classList.toggle("light");
  localStorage.setItem("theme",
    document.body.classList.contains("light")?"light":"dark"
  );
}

/* ===== DATA ===== */
const products = [
  {name:"AI SEO Toolkit",buyPrice:49,sellPrice:99,source:"AppSumo",affiliateUrl:"https://appsumo.com/?ref=dealscope",commission:0.3},
  {name:"Email Cleaner Pro",buyPrice:29,sellPrice:79,source:"Gumroad",affiliateUrl:"https://gumroad.com/?ref=dealscope",commission:0.4},
  {name:"Landing Page Builder",buyPrice:59,sellPrice:149,source:"ProductHunt",affiliateUrl:"https://producthunt.com",commission:0.2},
  {name:"Analytics Dashboard",buyPrice:39,sellPrice:59,source:"IndieHackers",affiliateUrl:"https://indiehackers.com",commission:0.25}
];

/* ===== STORAGE ===== */
let clicks = JSON.parse(localStorage.getItem("clicks")||"{}");
let revenue = JSON.parse(localStorage.getItem("revenue")||"{}");
let watchlist = JSON.parse(localStorage.getItem("watchlist")||"[]");

/* ===== LOGIC ===== */
function ai(p){
  return Math.min(100, Math.floor((p.sellPrice-p.buyPrice)*1.2));
}

function trackClick(p){
  clicks[p.name]=(clicks[p.name]||0)+1;
  revenue[p.name]=(revenue[p.name]||0)+(p.sellPrice*p.commission);
  localStorage.setItem("clicks",JSON.stringify(clicks));
  localStorage.setItem("revenue",JSON.stringify(revenue));
  updateStats();
  window.open(p.affiliateUrl,"_blank");
}

function toggleWatch(name){
  watchlist.includes(name)
    ? watchlist=watchlist.filter(n=>n!==name)
    : watchlist.push(name);
  localStorage.setItem("watchlist",JSON.stringify(watchlist));
  render();
}

function updateStats(){
  let tc=0,tr=0;
  Object.values(clicks).forEach(v=>tc+=v);
  Object.values(revenue).forEach(v=>tr+=v);
  revenueStats.innerHTML=`üîó Clicks: <b>${tc}</b> ¬∑ üí∞ Est. revenue: <b>$${tr.toFixed(2)}</b>`;
}

/* ===== RENDER ===== */
function render(){
  const tb=document.getElementById("tableBody");
  tb.innerHTML="";
  const sorted=[...products].sort((a,b)=>(b.sellPrice-b.buyPrice)-(a.sellPrice-a.buyPrice));
  sorted.forEach((p,i)=>{
    const profit=p.sellPrice-p.buyPrice;
    tb.innerHTML+=`
    <tr class="${i===0?'top-pick-row':''}">
      <td>${p.name} ${i===0?'<span class="badge top">TOP</span>':''}</td>
      <td>$${p.buyPrice}</td>
      <td>${p.source}</td>
      <td>$${p.sellPrice}</td>
      <td class="green">+$${profit}</td>
      <td><span class="badge ai">${ai(p)}</span></td>
      <td><button onclick="toggleWatch('${p.name}')">${watchlist.includes(p.name)?"‚òÖ":"‚òÜ"}</button></td>
      <td><button class="buy-btn" onclick='trackClick(${JSON.stringify(p)})'>Buy</button></td>
    </tr>`;
  });
  updateStats();
}

/* ===== SCAN STATUS ===== */
setTimeout(()=>{
  scanStatus.innerText="‚úÖ Updated just now";
  let mins=1;
  setInterval(()=>{
    scanStatus.innerText=`‚úÖ Updated ${mins++} min ago`;
  },60000);
},1500);

function enterApp(){
  landing.style.display="none";
  app.style.display="block";
}

render();
</script>

</body>
</html>