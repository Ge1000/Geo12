<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geo Nuclear Quick Pick 5.6.3</title>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

<style>
body{
background:#0f172a;
color:#e2e8f0;
font-family:system-ui;
text-align:center;
padding:20px;
}
h1{color:#22c55e;font-size:22px}
button{
padding:12px 20px;
margin:10px;
border:none;
border-radius:8px;
background:#22c55e;
color:#000;
font-weight:bold;
cursor:pointer;
}
.match{
margin:10px 0;
padding:12px;
background:#111827;
border-radius:8px;
}
.high{border-left:5px solid #22c55e;}
.medium{border-left:5px solid #facc15;}
.low{border-left:5px solid #ef4444;}
</style>
</head>
<body>

<h1>ðŸ’¥ Geo Nuclear Quick Pick 5.6.3 ðŸ’¥</h1>

<input type="file" id="imageInput">
<br>
<button onclick="runOCR()">RuleazÄƒ analizÄƒ</button>

<div id="output"></div>

<script>

// ------------------ CLEAN OCR ------------------

function cleanOCR(text){

const junk = [
"meci","egal","live","casino","bonus","meniu",
"bilete","sport","calendar","competitii",
"superbet","azi","astazi","builder",
"league","premier","liga","anglia",
"acasa","bet","1","x","2"
]

return text
.replace(/[^a-zA-Z0-9\.\-\n ]/g,'')
.split("\n")
.map(line=>{
let l=line.trim()
if(l.length<3) return ""
let lower=l.toLowerCase()
for(let j of junk){
if(lower===j) return ""
}
return l
})
.filter(l=>l!=="")
.join("\n")

}

// ------------------ PARSER HYBRID ------------------

function parseMatches(text){

let lines=text.split("\n")
.map(l=>l.trim())
.filter(l=>l.length>2)

let matches=[]
let used=new Set()

for(let i=0;i<lines.length;i++){

if(used.has(i)) continue

let current=lines[i]

// ignorÄƒm linii care conÈ›in cote
if(current.match(/\d+\.\d+/)) continue

// CASE echipe pe 2 linii + cote pe a 3-a
if(i+2<lines.length){

let home=lines[i]
let away=lines[i+1]
let oddsLine=lines[i+2]

if(!home.match(/\d/) && !away.match(/\d/)){

let odds=oddsLine.match(/(\d+\.\d+)/g)

if(odds && odds.length>=3){

matches.push({
home:home,
away:away,
odd1:parseFloat(odds[0]),
oddX:parseFloat(odds[1]),
odd2:parseFloat(odds[2])
})

used.add(i)
used.add(i+1)
used.add(i+2)
}
}
}

}

return matches
}

// ------------------ CALCUL PROBABILITATE ------------------

function calculate(match){

let p1=1/match.odd1
let pX=1/match.oddX
let p2=1/match.odd2

let total=p1+pX+p2

p1/=total
pX/=total
p2/=total

let maxProb=Math.max(p1,pX,p2)

let pick=
maxProb===p1?match.home:
maxProb===p2?match.away:
"Egal"

let percent=(maxProb*100).toFixed(2)

return {pick,percent,maxProb}
}

// ------------------ DISPLAY ------------------

function display(matches){

let container=document.getElementById("output")
container.innerHTML=""

if(matches.length===0){
container.innerHTML="Nu s-au detectat meciuri valide."
return
}

matches.forEach(m=>{

let calc=calculate(m)

let level="low"
if(calc.maxProb>0.55) level="high"
else if(calc.maxProb>0.40) level="medium"

container.innerHTML+=`
<div class="match ${level}">
<b>${m.home} vs ${m.away}</b><br>
Cote: ${m.odd1} / ${m.oddX} / ${m.odd2}<br>
ðŸ”¥ Recomandare: <b>${calc.pick}</b><br>
Probabilitate: ${calc.percent}%
</div>
`
})
}

// ------------------ OCR ------------------

async function runOCR(){

let file=document.getElementById("imageInput").files[0]
if(!file) return alert("SelecteazÄƒ o pozÄƒ")

let { data: { text } } = await Tesseract.recognize(file,'eng')

let cleaned=cleanOCR(text)

let matches=parseMatches(cleaned)

display(matches)
}

</script>

</body>
</html>