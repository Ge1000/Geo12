<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>OMNISCAN â€“ Meme Coins Ultra Mega Quantum (15m) â€“ Doar Noi</title>
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
<style>
body { background:#000; color:#0f0; font-family:monospace; padding:10px; }
h1 { color:#0ff; }
.signal { margin-bottom:15px; border-bottom:1px solid #0f0; padding-bottom:5px; }
.address { background:#111; padding:2px 4px; font-family:monospace; display:inline-block; width:auto; }
button.copyBtn { margin-left:5px; cursor:pointer; }
</style>
</head>
<body>

<h1>OMNISCAN â€“ Meme Coins Ultra Mega Quantum (15m) â‰¥60% | Noi 1-2 zile</h1>
<div id="output">Motor cosmic quantum se iniÈ›ializeazÄƒ...</div>

<script>
// --- INIT OneSignal ---
window.OneSignal = window.OneSignal || [];
OneSignal.push(function() {
  OneSignal.init({
    appId: "YOUR_REAL_ONESIGNAL_APP_ID",
    notifyButton: { enable:false }
  });
});

// --- FUNCTII QUANTUM ---
function quantumTrendScore(prices){
    let score=0;
    if(prices.length>=5){
        for(let i=prices.length-5;i<prices.length-1;i++){
            const diff=prices[i+1]-prices[i];
            score += diff>0 ? 10 + Math.log(1+diff*100) : 0;
        }
    }
    return Math.min(score,40);
}

function quantumVolumeScore(currentVolume, avgVolume){
    return currentVolume>avgVolume*1.2 ? 30 : 0;
}

function quantumLiquidityScore(liquidity){
    return liquidity>5000 ? 30 : 0;
}

// --- Binance Meme Noi (1-2 zile) ---
async function fetchBinanceNewMemeSymbols(){
    try {
        const res = await fetch('https://api.binance.com/api/v3/exchangeInfo');
        const data = await res.json();
        const memeKeywords = ["DOGE","SHIB","CAKE","PEPE","SAITAMA","ELON"];
        const now = Date.now();
        const oneDayMs = 24*60*60*1000;
        const twoDaysMs = 2*oneDayMs;

        // aici filtram doar token-uri "noi" (aprox prin primul kline 15m)
        const newMemeSymbols = [];
        for(const s of data.symbols){
            if(s.quoteAsset==="USDT" && memeKeywords.some(k=>s.baseAsset.includes(k))){
                try{
                    const kline = await fetch(`https://api.binance.com/api/v3/klines?symbol=${s.symbol}&interval=15m&limit=1`).then(r=>r.json());
                    const firstTime = kline[0][0]; // timestamp primului kline
                    if(now - firstTime <= twoDaysMs){
                        newMemeSymbols.push({symbol:s.symbol, address:s.contractAddress || s.baseAsset});
                    }
                }catch(e){console.error(e);}
            }
        }
        return newMemeSymbols;
    } catch(e) { console.error(e); return []; }
}

async function analyzeBinanceMeme(symbolObj){
    const symbol = symbolObj.symbol;
    const url = `https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=15m&limit=15`;
    const res = await fetch(url);
    const data = await res.json();
    const closes = data.map(c=>parseFloat(c[4]));
    const volumes = data.map(c=>parseFloat(c[5]));
    const avgVolume = volumes.slice(0,-1).reduce((a,b)=>a+b)/(volumes.length-1);
    const currentVolume = volumes[volumes.length-1];
    const currentPrice = closes[closes.length-1];

    // Calcule aproximative MCap
    const circulatingSupply = 1000000000; 
    const mcap = (currentPrice * circulatingSupply).toLocaleString('en-US', {style:'currency',currency:'USD'});

    const score = quantumTrendScore(closes) + quantumVolumeScore(currentVolume, avgVolume) + quantumLiquidityScore(avgVolume*1000);
    return {symbol, score:Math.min(100,score), price:currentPrice, address:symbolObj.address, mcap};
}

// --- Solana Meme Noi (1-2 zile) ---
async function fetchSolanaNewTokens(){
    try{
        const res = await fetch('https://api.dexscreener.com/latest/dex/tokens?chain=solana');
        const data = await res.json();
        const now = Date.now();
        const twoDaysMs = 2*24*60*60*1000;

        return data.pairs
            .filter(t=>t.baseToken.dayData.volumeUsd>1000 && parseFloat(t.liquidity)>5000)
            .slice(0,50)
            .map(t=>{
                const createdAt = t.baseToken.createdAt || now; // timestamp in ms
                if(now - createdAt <= twoDaysMs){
                    return {
                        name:t.baseToken.name,
                        symbol:t.baseToken.symbol,
                        price:parseFloat(t.priceUsd),
                        prices15m:t.baseToken.priceData15m || [],
                        volume:parseFloat(t.baseToken.dayData.volumeUsd),
                        liquidity:parseFloat(t.liquidity),
                        address:t.baseToken.address,
                        mcap:t.baseToken.marketCapUsd ? parseFloat(t.baseToken.marketCapUsd).toLocaleString('en-US', {style:'currency',currency:'USD'}) : "N/A"
                    };
                }
            }).filter(Boolean);
    }catch(e){console.error(e); return [];}
}

function analyzeSolanaToken(token){
    const score = quantumTrendScore(token.prices15m) + quantumVolumeScore(token.volume, 1000) + quantumLiquidityScore(token.liquidity);
    return {...token, score:Math.min(100,score)};
}

// --- MOTOR QUANTUM ---
async function runQuantumScanner(){
    const output=document.getElementById("output");
    let signals=[];

    // Binance meme automat
    const binanceNewMemeSymbols = await fetchBinanceNewMemeSymbols();
    for(const s of binanceNewMemeSymbols){
        try{
            const res = await analyzeBinanceMeme(s);
            if(res.score>=60) signals.push(res);
        }catch(e){console.error(e);}
    }

    // Solana meme
    const solTokens = await fetchSolanaNewTokens();
    solTokens.forEach(t=>{
        const analyzed = analyzeSolanaToken(t);
        if(analyzed.score>=60) signals.push(analyzed);
    });

    if(signals.length===0){
        output.innerHTML="âš ï¸ Nicio oportunitate meme nouÄƒ â‰¥60% momentan.";
    }else{
        output.innerHTML=signals.map((s,i)=>{
            const inputId = `addr${i}`;
            OneSignal.push(function(){
                OneSignal.sendSelfNotification(
                    `ðŸŒ  Quantum Meme Signal: ${s.symbol}`,
                    `Score: ${Math.round(s.score)}% | Price: ${s.price} | MCap: ${s.mcap} | Address: ${s.address}`,
                    'https://i.imgur.com/U4tV8aQ.png',
                    {url: window.location.href}
                );
            });
            return `<div class="signal">
ðŸš€ ${s.symbol} | Score: ${Math.round(s.score)}% | Price: ${s.price} | MCap: ${s.mcap}  
<input type="text" id="${inputId}" value="${s.address}" readonly class="address">
<button class="copyBtn" onclick="navigator.clipboard.writeText(document.getElementById('${inputId}').value)">Copy Address</button>
</div>`;
        }).join("");
    }
}

// --- RUN AUTOMATIC LA 1 MIN ---
runQuantumScanner();
setInterval(runQuantumScanner,60000);

</script>
</body>
</html>