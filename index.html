<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geo Nuclear Quick Pick 5.6</title>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

<style>
body{
background:#0f172a;
color:#e2e8f0;
font-family:system-ui;
text-align:center;
padding:20px;
}
h1{color:#22c55e;font-size:22px}
button{
padding:12px 20px;
margin:10px;
border:none;
border-radius:8px;
background:#22c55e;
color:#000;
font-weight:bold;
cursor:pointer;
}
.result{
margin-top:20px;
padding:15px;
background:#1e293b;
border-radius:10px;
}
.match{
margin:10px 0;
padding:10px;
background:#111827;
border-radius:8px;
}
.high{border-left:5px solid #22c55e;}
.medium{border-left:5px solid #facc15;}
.low{border-left:5px solid #ef4444;}
textarea{
width:100%;
height:150px;
margin-top:10px;
background:#111827;
color:#fff;
border-radius:8px;
padding:10px;
font-size:13px;
}
</style>
</head>
<body>

<h1>ðŸ’¥ Geo Nuclear Quick Pick 5.6 ðŸ’¥</h1>

<input type="file" id="imageInput">
<br>
<button onclick="runOCR()">RuleazÄƒ analizÄƒ</button>

<div class="result" id="output"></div>

<script>

function cleanOCR(text){
return text
.replace(/[^a-zA-Z0-9\.\-\n\/ ]/g,'')
.replace(/(live|casino|bonus|meniu|bilete|sport|calendar|competitii)/gi,'')
.replace(/\s+/g,' ')
}

function parseMatches(text){
let lines=text.split(/(?=\d\.\d{2})/g)
let matches=[]

for(let line of lines){

let odds=line.match(/(\d\.\d{2})/g)
if(!odds || odds.length<3) continue

let teams=line.split(odds[0])[0].trim()

let teamMatch=teams.match(/([A-Za-z ]+)\s+([A-Za-z ]+)/)

if(!teamMatch) continue

let home=teamMatch[1].trim()
let away=teamMatch[2].trim()

matches.push({
home:home,
away:away,
odd1:parseFloat(odds[0]),
oddX:parseFloat(odds[1]),
odd2:parseFloat(odds[2])
})
}

return matches
}

function calculateEdge(match){

let p1=1/match.odd1
let pX=1/match.oddX
let p2=1/match.odd2

let total=p1+pX+p2

p1/=total
pX/=total
p2/=total

let maxProb=Math.max(p1,pX,p2)

let pick=
maxProb===p1?match.home:
maxProb===p2?match.away:
"Egal"

let edge=(maxProb*100).toFixed(2)

return {pick,edge,maxProb}
}

function display(matches){

let container=document.getElementById("output")
container.innerHTML=""

if(matches.length===0){
container.innerHTML="Nu s-au detectat meciuri valide."
return
}

matches.forEach(m=>{

let calc=calculateEdge(m)

let level="low"
if(calc.maxProb>0.55) level="high"
else if(calc.maxProb>0.40) level="medium"

container.innerHTML+=`
<div class="match ${level}">
<b>${m.home} vs ${m.away}</b><br>
Cote: ${m.odd1} / ${m.oddX} / ${m.odd2}<br>
ðŸ”¥ Recomandare: <b>${calc.pick}</b><br>
Probabilitate estimatÄƒ: ${calc.edge}%
</div>
`
})
}

async function runOCR(){
let file=document.getElementById("imageInput").files[0]
if(!file) return alert("SelecteazÄƒ o pozÄƒ")

let { data: { text } } = await Tesseract.recognize(file,'eng')

let cleaned=cleanOCR(text)

let matches=parseMatches(cleaned)

display(matches)
}

</script>

</body>
</html>