<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DealScope ‚Äì Opportunity Scanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:#0f1220;
  color:#fff;
  margin:0;
  padding:20px;
}

h1 { margin-bottom:5px; }
.subtitle { color:#aaa; margin-bottom:10px; }

.status { font-size:12px; color:#9ca3af; margin-bottom:15px; }

.filters {
  display:flex;
  gap:10px;
  margin-bottom:20px;
  flex-wrap:wrap;
}

input, select, button {
  padding:8px 10px;
  border-radius:6px;
  border:none;
  font-size:14px;
}

button {
  background:#4f7cff;
  color:white;
  cursor:pointer;
}

.buy-btn {
  background:#22c55e;
  color:#000;
  font-weight:600;
}

table {
  width:100%;
  border-collapse:collapse;
  background:#161a33;
  border-radius:8px;
  overflow:hidden;
}

th, td {
  padding:12px;
  border-bottom:1px solid #2a2f55;
  white-space:nowrap;
}

th {
  background:#1d2245;
  cursor:pointer;
}

tr:hover { background:#1b2050; }

.green { color:#5dff9b; }

.badge {
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  font-weight:600;
  display:inline-block;
}

.badge.ai { background:#2563eb; }
.badge.top { background:#22c55e; color:#000; }

.top-pick-row { background:rgba(34,197,94,0.12); }

footer {
  margin-top:30px;
  color:#777;
  font-size:12px;
  text-align:center;
}

#landing { text-align:center; margin-top:60px; }
#app { display:none; }

.cta {
  font-size:18px;
  margin-top:20px;
  padding:14px 22px;
  background:#22c55e;
  color:#000;
}

.stats {
  margin:15px 0;
  padding:10px;
  background:#161a33;
  border-radius:8px;
  font-size:14px;
}
</style>
</head>

<body>

<!-- LANDING -->
<div id="landing">
  <h1>DealScope</h1>
  <p class="subtitle">AI-assisted scanner for underpriced digital products</p>
  <button class="cta" onclick="enterApp()">Launch Scanner</button>
  <p class="status">Demo ¬∑ Affiliate model ¬∑ Info only</p>
</div>

<!-- APP -->
<div id="app">
<h1>DealScope</h1>
<div class="subtitle">Underpriced digital products ‚Äì scanned & compared</div>
<div class="status">üîÑ Demo scan active</div>

<div class="stats" id="revenueStats"></div>

<div class="table-wrap">
<table>
<thead>
<tr>
  <th>Product</th>
  <th>Buy</th>
  <th>Source</th>
  <th>Sell</th>
  <th>Profit</th>
  <th>AI</th>
  <th>‚≠ê</th>
  <th>Action</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<footer>Information only. No financial advice.</footer>
</div>

<script>
/* ===== DATA ===== */

const products = [
  {
    name:"AI SEO Toolkit",
    buyPrice:49,
    sellPrice:99,
    source:"AppSumo",
    affiliateUrl:"https://appsumo.com/?ref=dealscope",
    commission:0.3
  },
  {
    name:"Email Cleaner Pro",
    buyPrice:29,
    sellPrice:79,
    source:"Gumroad",
    affiliateUrl:"https://gumroad.com/?ref=dealscope",
    commission:0.4
  },
  {
    name:"Landing Page Builder",
    buyPrice:59,
    sellPrice:149,
    source:"ProductHunt",
    affiliateUrl:"https://www.producthunt.com",
    commission:0.2
  },
  {
    name:"Analytics Dashboard",
    buyPrice:39,
    sellPrice:59,
    source:"IndieHackers",
    affiliateUrl:"https://www.indiehackers.com",
    commission:0.25
  }
];

/* ===== STORAGE ===== */

let clicks = JSON.parse(localStorage.getItem("clicks") || "{}");
let revenue = JSON.parse(localStorage.getItem("revenue") || "{}");
let watchlist = JSON.parse(localStorage.getItem("watchlist") || "[]");

/* ===== LOGIC ===== */

function ai(p){
  return Math.min(100, Math.floor((p.sellPrice - p.buyPrice) * 1.2));
}

function trackClick(p){
  clicks[p.name] = (clicks[p.name] || 0) + 1;
  revenue[p.name] = (revenue[p.name] || 0) + (p.sellPrice * p.commission);
  localStorage.setItem("clicks", JSON.stringify(clicks));
  localStorage.setItem("revenue", JSON.stringify(revenue));
  updateStats();
  window.open(p.affiliateUrl, "_blank");
}

function toggleWatch(name){
  watchlist.includes(name)
    ? watchlist = watchlist.filter(n=>n!==name)
    : watchlist.push(name);
  localStorage.setItem("watchlist", JSON.stringify(watchlist));
  render();
}

function updateStats(){
  let totalClicks = 0;
  let totalRevenue = 0;
  Object.values(clicks).forEach(c=> totalClicks+=c);
  Object.values(revenue).forEach(r=> totalRevenue+=r);

  document.getElementById("revenueStats").innerHTML = `
    üîó Total clicks: <b>${totalClicks}</b><br>
    üí∞ Estimated revenue: <b>$${totalRevenue.toFixed(2)}</b>
  `;
}

function render(){
  const tb = document.getElementById("tableBody");
  tb.innerHTML = "";

  products.forEach((p,i)=>{
    const profit = p.sellPrice - p.buyPrice;
    tb.innerHTML += `
      <tr class="${i===0?'top-pick-row':''}">
        <td>${p.name} ${i===0?'<span class="badge top">TOP</span>':''}</td>
        <td>$${p.buyPrice}</td>
        <td>${p.source}</td>
        <td>$${p.sellPrice}</td>
        <td class="green">+$${profit}</td>
        <td><span class="badge ai">${ai(p)}</span></td>
        <td><button onclick="toggleWatch('${p.name}')">${watchlist.includes(p.name)?"‚òÖ":"‚òÜ"}</button></td>
        <td><button class="buy-btn" onclick='trackClick(${JSON.stringify(p)})'>Buy</button></td>
      </tr>
    `;
  });

  updateStats();
}

function enterApp(){
  landing.style.display="none";
  app.style.display="block";
}

render();
</script>

</body>
</html>