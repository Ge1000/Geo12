<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BOMBO – Independent Offer Integrity Check</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f1220;
  color: #fff;
  margin: 0;
  padding: 24px;
}
h1 { margin-bottom: 4px; }
.subtitle { color: #aaa; margin-bottom: 20px; }
.panel {
  background: #161a33;
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 20px;
}
label { display:block;margin:10px 0 6px;font-size:14px;color:#ccc; }
textarea, button {
  width:100%;padding:10px;border-radius:8px;border:none;font-size:14px;
}
textarea { resize:vertical;min-height:80px; }
button {
  background:#4f7cff;color:#fff;font-weight:600;cursor:pointer;margin-top:14px;
}
.score { font-size:48px;font-weight:700; }
.green{color:#5dff9b;} .yellow{color:#ffd45d;} .red{color:#ff6b6b;}
.badge{
  display:inline-block;padding:4px 10px;border-radius:6px;
  font-size:12px;font-weight:600;margin-right:6px;margin-bottom:6px;
}
.badge.green{background:#1e6f4a;}
.badge.yellow{background:#6f5a1e;}
.badge.red{background:#6f1e1e;}
ul{padding-left:18px;margin-top:8px;}
details{
  background:#12162b;border-radius:8px;padding:10px;margin-top:10px;
}
summary{cursor:pointer;font-weight:600;color:#9fb3ff;}
footer{
  margin-top:30px;font-size:12px;color:#777;text-align:center;
}
</style>
</head>

<body>

<h1>BOMBO</h1>
<div class="subtitle">
Independent Offer Integrity Check – observed reality, not declared input
</div>

<div class="panel">
  <label>Context (optional)</label>
  <textarea id="offerText" placeholder="Optional notes. BOMBO analyzes the page automatically."></textarea>
  <button onclick="runCheck()">Run Integrity Check</button>
</div>

<div class="panel" id="result" style="display:none;">
  <div class="score" id="score"></div>
  <div id="level"></div>

  <h3>Detected Signals</h3>
  <div id="signals"></div>

  <h3>Explanation</h3>
  <ul id="explanations"></ul>

  <details>
    <summary>Audit Log (verifiable)</summary>
    <ul id="auditLog"></ul>
  </details>

  <details>
    <summary>Export – Legal / Compliance</summary>
    <pre id="exportBox" style="white-space:pre-wrap;"></pre>
  </details>

  <details>
    <summary>Open Rule Specification</summary>
    <pre id="ruleSpec"></pre>
  </details>

  <details>
    <summary>Whitepaper – BOMBO Integrity Engine</summary>
    <pre id="whitepaper" style="white-space:pre-wrap;"></pre>
  </details>
</div>

<footer>
<strong>Disclaimer:</strong> BOMBO provides informational integrity signals only.
No financial, legal, or purchasing advice.<br><br>

<strong>Privacy:</strong> All analysis is performed locally in your browser.
No data is stored, transmitted, tracked, or shared. No cookies.
</footer>

<script>
/* =======================
   RULE SET (CANONICAL)
======================= */
const RULES = [
  "Unverifiable discount → -15",
  "Soft urgency language → -8",
  "Artificial urgency / countdown → -15",
  "Missing or opaque terms → -20",
  "Emotional exaggeration → -5",
  "Affiliate / redirect masking → -5"
];

/* Stable rule-set hash (deterministic) */
function ruleSetHash(){
  return btoa(RULES.join("|"));
}

/* =======================
   CORE ENGINE
======================= */
function runCheck(){
  let score = 100;
  const signals = [];
  const explanations = [];
  const audit = [];

  const text = document.body.innerText.toLowerCase();
  const html = document.documentElement.innerHTML.toLowerCase();

  function log(rule, penalty){
    audit.push(`${rule} → ${penalty}`);
  }

  if (/%\s*off|sale|discount/.test(text) && !/was\s*\$|<del>/.test(html)) {
    score -= 15;
    signals.push("Unverifiable discount");
    explanations.push("Discount language without reference price.");
    log("Unverifiable discount","-15");
  }

  if (/only today|last chance|ends in/.test(text)) {
    score -= 8;
    signals.push("Soft urgency language");
    explanations.push("Time pressure wording detected.");
    log("Soft urgency","-8");
  }

  if (/countdown|setinterval|timer/.test(html)) {
    score -= 15;
    signals.push("Artificial urgency");
    explanations.push("Countdown or scarcity mechanism detected.");
    log("Artificial urgency","-15");
  }

  if (!/terms|refund|policy/.test(text)) {
    score -= 20;
    signals.push("Missing or opaque terms");
    explanations.push("No visible terms or refund policy.");
    log("Missing terms","-20");
  }

  if (/best ever|guaranteed|no risk/.test(text)) {
    score -= 5;
    signals.push("Emotional exaggeration");
    explanations.push("Subjective exaggeration detected.");
    log("Emotional exaggeration","-5");
  }

  if (/redirect|affid|utm_/.test(html)) {
    score -= 5;
    signals.push("Affiliate masking indicators");
    explanations.push("Redirect or tracking indicators detected.");
    log("Affiliate masking","-5");
  }

  if (audit.length === 0) {
    audit.push("All integrity rules executed → no penalties applied");
  }

  score = Math.max(0, score);

  let level="High Integrity",color="green";
  if(score<80){level="Moderate Integrity";color="yellow";}
  if(score<50){level="Low Integrity";color="red";}

  document.getElementById("result").style.display="block";
  setScore(score,color,level);
  renderBadges("signals",signals,color);
  renderList("explanations",explanations);
  renderList("auditLog",audit);

  const execFingerprint = btoa(
    ruleSetHash()+"|"+audit.join("|")+"|"+location.hostname
  );

  document.getElementById("exportBox").textContent =
`Integrity Score: ${score}
Level: ${level}

RuleSetHash:
${ruleSetHash()}

Audit:
${audit.join("\n")}

Execution fingerprint:
${execFingerprint}

Methodology:
Observed reality. Deterministic rules.
No tracking. No cookies.`;

  document.getElementById("ruleSpec").textContent =
`Base score: 100
Rules:
${RULES.join("\n")}

RuleSetHash:
${ruleSetHash()}`;

  document.getElementById("whitepaper").textContent =
`BOMBO – Independent Offer Integrity Engine

BOMBO evaluates online offers using deterministic,
rule-based analysis of observable page content.

It does NOT:
- track users
- use cookies
- learn or personalize
- affiliate or monetize results

It DOES:
- analyze visible content and page structure
- apply transparent, published rules
- produce reproducible, auditable scores

Same rules. Same page. Same result.

Designed for:
- consumers
- platforms
- compliance and legal review`;
}

/* =======================
   UI HELPERS
======================= */
function setScore(score,color,level){
  const s=document.getElementById("score");
  s.textContent=score;
  s.className="score "+color;
  document.getElementById("level").innerHTML=
    `<span class="badge ${color}">${level}</span>`;
}
function renderBadges(id,list,color){
  const el=document.getElementById(id);el.innerHTML="";
  list.forEach(i=>el.innerHTML+=`<span class="badge ${color}">${i}</span>`);
}
function renderList(id,list){
  const el=document.getElementById(id);el.innerHTML="";
  list.forEach(i=>{const li=document.createElement("li");li.textContent=i;el.appendChild(li);});
}
</script>

</body>
</html>