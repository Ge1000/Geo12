<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ThinSkin</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #0f1a2b, #050b18);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.screen {
  display: none;
  flex-direction: column;
  align-items: center;
  text-align: center;
  width: 90%;
  max-width: 420px;
}

h1 { margin-bottom: 6px; }
p { opacity: 0.75; }

.challenge-label {
  margin-top: 24px;
  font-size: 12px;
  letter-spacing: 1px;
  opacity: 0.6;
  text-transform: uppercase;
}

.challenge {
  font-size: 18px;
  margin: 12px 0 24px;
}

button {
  margin-top: 24px;
  padding: 16px 38px;
  border-radius: 14px;
  border: none;
  font-size: 17px;
  font-weight: 600;
  background: #22c55e;
  color: #000;
  cursor: pointer;
}

button.locked {
  opacity: 0.4;
  pointer-events: none;
}

label {
  margin-top: 16px;
  cursor: pointer;
}

.progress {
  margin-top: 16px;
  font-size: 13px;
  opacity: 0.7;
}

.disclaimer {
  position: fixed;
  bottom: 14px;
  font-size: 11px;
  opacity: 0.45;
  text-align: center;
  max-width: 90%;
}
</style>
</head>

<body>

<div id="home" class="screen">
  <h1>ThinSkin</h1>
  <p>A private space for daily discipline.</p>
  <button onclick="loadDaily()">Start</button>
</div>

<div id="daily" class="screen">
  <h1 id="dayTitle"></h1>

  <div class="challenge-label">Today’s challenge</div>
  <div class="challenge" id="challengeText"></div>

  <label>
    <input type="checkbox" id="doneCheck">
    I did this today
  </label>

  <button id="confirmBtn" class="locked">Confirm</button>

  <div class="progress" id="progressInfo"></div>
</div>

<div id="locked" class="screen">
  <h1>Done for today</h1>
  <p>Come back tomorrow.</p>
</div>

<div id="finished" class="screen">
  <h1>No more challenges</h1>
  <p>You have completed everything available.</p>
</div>

<div class="disclaimer">
  This is a personal experimental project. It does not provide advice or guarantees.
</div>

<script>
// ===== ALL CHALLENGES (FINITE, NEVER REPEAT) =====
const ALL_CHALLENGES = [
  "Do one uncomfortable thing today — quietly.",
  "Avoid explaining yourself once today.",
  "Finish something without seeking validation.",
  "Repeat a task even if you feel bored.",
  "Show up when it would be easier to disappear.",
  "Choose discipline over comfort one time today.",
  "Continue even when no one notices.",
  "Resist the urge to quit early.",
  "Accept boredom without distraction."
];

// ===== STATE =====
let state = JSON.parse(localStorage.getItem("thinskin")) || {
  lastDate: null,
  usedChallenges: [],
  todayChallenge: null,
  dayCount: 0
};

// ===== ELEMENTS =====
const screens = {
  home: document.getElementById("home"),
  daily: document.getElementById("daily"),
  locked: document.getElementById("locked"),
  finished: document.getElementById("finished")
};

const challengeText = document.getElementById("challengeText");
const dayTitle = document.getElementById("dayTitle");
const check = document.getElementById("doneCheck");
const confirmBtn = document.getElementById("confirmBtn");
const progressInfo = document.getElementById("progressInfo");

// ===== HELPERS =====
function today() {
  return new Date().toISOString().slice(0,10);
}

function save() {
  localStorage.setItem("thinskin", JSON.stringify(state));
}

function show(name) {
  Object.values(screens).forEach(s => s.style.display = "none");
  screens[name].style.display = "flex";
}

// ===== CORE LOGIC =====
function loadDaily() {
  const t = today();

  if (state.lastDate === t) {
    show("locked");
    return;
  }

  const remaining = ALL_CHALLENGES.filter(
    c => !state.usedChallenges.includes(c)
  );

  if (remaining.length === 0) {
    show("finished");
    return;
  }

  if (!state.todayChallenge) {
    const i = Math.floor(Math.random() * remaining.length);
    state.todayChallenge = remaining[i];
  }

  challengeText.textContent = state.todayChallenge;
  state.dayCount++;

  dayTitle.textContent = "Day " + state.dayCount;
  progressInfo.textContent =
    `${remaining.length} challenges remaining`;

  check.checked = false;
  confirmBtn.classList.add("locked");

  show("daily");
}

check.onchange = () => {
  confirmBtn.classList.toggle("locked", !check.checked);
};

confirmBtn.onclick = () => {
  state.lastDate = today();
  state.usedChallenges.push(state.todayChallenge);
  state.todayChallenge = null;
  save();
  show("locked");
};

// ===== INIT =====
show("home");
</script>

</body>
</html>