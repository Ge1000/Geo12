<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DealScope â€“ Universal Affiliate Scanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:#0f1220;
  color:#fff;
  margin:0;
  padding:20px;
}

h1 { margin-bottom:6px; }
.subtitle { color:#a1a1aa; margin-bottom:6px; }
.status { font-size:12px; color:#9ca3af; margin-bottom:12px; }

.integrity {
  display:inline-block;
  font-size:12px;
  background:#0b3b2e;
  color:#5eead4;
  padding:6px 10px;
  border-radius:8px;
  margin-bottom:16px;
}

.controls {
  display:flex;
  gap:10px;
  margin:18px 0;
  flex-wrap:wrap;
}

select {
  padding:8px;
  border-radius:6px;
  border:none;
}

table {
  width:100%;
  border-collapse:collapse;
  background:#161a33;
  border-radius:12px;
  overflow:hidden;
}

th, td {
  padding:14px 12px;
  border-bottom:1px solid #2a2f55;
  vertical-align:top;
}

th { background:#1d2245; text-align:left; }
tr:hover { background:#1b2050; }

.badge {
  padding:5px 10px;
  border-radius:7px;
  font-size:12px;
  font-weight:700;
  display:inline-block;
}

.badge.green { background:#22c55e; color:#000; }
.badge.orange { background:#f97316; color:#000; }
.badge.red { background:#dc2626; }

.buy-btn {
  background:#22c55e;
  color:#000;
  border:none;
  padding:8px 14px;
  border-radius:6px;
  font-weight:700;
  cursor:pointer;
}

.why {
  font-size:12px;
  color:#cbd5f5;
  margin-top:8px;
  line-height:1.45;
  max-width:320px;
}

.why ul {
  padding-left:16px;
  margin:6px 0 0 0;
}

.why li {
  margin-bottom:4px;
}

footer {
  margin-top:36px;
  font-size:12px;
  color:#9ca3af;
  text-align:center;
  line-height:1.6;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
}
</style>
</head>

<body>

<h1>DealScope</h1>
<div class="subtitle">Universal affiliate scanner Â· Automated validation engine</div>
<div class="status">ðŸŸ¢ Integrity rules active Â· No accounts Â· No user tracking</div>

<div class="integrity" id="integrityBadge"></div>

<div class="controls">
  <select id="sortSelect" onchange="applySort()">
    <option value="discount">ðŸ”¥ Best discount</option>
    <option value="commission">ðŸ“ˆ Highest commission rate</option>
    <option value="trust">ðŸ›¡ Highest merchant trust</option>
  </select>

  <select id="currencySelect" onchange="setCurrency(this.value)">
    <option value="USD">USD $</option>
    <option value="EUR">EUR â‚¬</option>
    <option value="GBP">GBP Â£</option>
  </select>
</div>

<table>
<thead>
<tr>
  <th>Product</th>
  <th>Price</th>
  <th>Market ref.</th>
  <th>Discount</th>
  <th>Validation</th>
  <th>Action</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<footer>
<strong>Legal & Integrity Disclosure (UK/EU)</strong><br><br>

DealScope operates as an automated validation and aggregation engine.
It analyses publicly available commercial information and affiliate feeds
using predefined integrity rules, including price comparison, discount depth,
market reference and merchant reliability.<br><br>

Validation labels indicate that an offer met objective criteria at the time of analysis.
They do not represent recommendations, guarantees, financial advice or future price accuracy.<br><br>

No user accounts, profiling cookies or personal data collection are used.
Prices and availability may change without notice.
</footer>

<script>
/* ------------------ Integrity Certificate ------------------ */
const CERT_VALIDITY_HOURS = 24;
const lastCheck = localStorage.getItem("integrityCheck") || Date.now();
localStorage.setItem("integrityCheck", lastCheck);

const hoursAgo = (Date.now() - lastCheck) / 36e5;
document.getElementById("integrityBadge").innerHTML =
  hoursAgo <= CERT_VALIDITY_HOURS
    ? "ðŸ›¡ Integrity verified Â· checked within last 24h"
    : "âš  Integrity status expired Â· pending recheck";

/* ------------------ Currency ------------------ */
const rates = { USD:1, EUR:0.92, GBP:0.79 };
const symbols = { USD:"$", EUR:"â‚¬", GBP:"Â£" };

let currency = localStorage.getItem("currency") || autoCurrency();

function autoCurrency(){
  const lang = navigator.language || "";
  if(lang.includes("en-GB")) return "GBP";
  if(lang.startsWith("en")) return "USD";
  if(lang.match(/de|fr|it|es/)) return "EUR";
  return "USD";
}

function setCurrency(c){
  currency = c;
  localStorage.setItem("currency", c);
  applySort();
}

document.getElementById("currencySelect").value = currency;
const fx = v => (v * rates[currency]).toFixed(2);

/* ------------------ Data ------------------ */
let feed = [
  { name:"Nike Air Zoom Pegasus", price:89, market:129, store:"Nike", trust:95, commission:0.04, url:"https://nike.com" },
  { name:"Oversized Hoodie", price:39, market:69, store:"Zalando", trust:90, commission:0.08, url:"https://zalando.com" },
  { name:"Wireless Headphones", price:59, market:99, store:"Amazon", trust:92, commission:0.04, url:"https://amazon.com" },
  { name:"AI SEO Toolkit", price:49, market:99, store:"AppSumo", trust:80, commission:0.30, url:"https://appsumo.com" }
];

const discount = p => Math.round((1 - p.price / p.market) * 100);

/* ------------------ Verdict ------------------ */
function verdict(p){
  if(discount(p)>=40 && p.trust>=85) return {text:"VALIDATED DEAL",cls:"green"};
  if(discount(p)>=25) return {text:"VALIDATED (limited data)",cls:"orange"};
  return {text:"NOT VALIDATED",cls:"red"};
}

function whyDeal(p){
  let r=[];
  if(discount(p)>=40) r.push("Discount exceeds market average");
  if(p.trust>=90) r.push("High merchant reliability");
  if(!r.length) r.push("Meets baseline validation criteria");
  return `
    <div class="why">
      Validation basis:
      <ul>${r.map(x=>`<li>${x}</li>`).join("")}</ul>
      <div style="opacity:.7;margin-top:6px">Data validated automatically Â· No recommendation</div>
    </div>`;
}

/* ------------------ Render ------------------ */
function applySort(){
  let list = [...feed];
  const v=document.getElementById("sortSelect").value;
  if(v==="discount") list.sort((a,b)=>discount(b)-discount(a));
  if(v==="commission") list.sort((a,b)=>b.commission-a.commission);
  if(v==="trust") list.sort((a,b)=>b.trust-a.trust);
  render(list);
}

function render(list){
  const tb=document.getElementById("tableBody");
  tb.innerHTML="";
  list.forEach(p=>{
    const v=verdict(p);
    tb.innerHTML+=`
    <tr>
      <td><b>${p.name}</b><br><small style="opacity:.7">${p.store}</small>${whyDeal(p)}</td>
      <td>${symbols[currency]}${fx(p.price)}</td>
      <td>${symbols[currency]}${fx(p.market)}</td>
      <td><span class="badge green">-${discount(p)}%</span></td>
      <td><span class="badge ${v.cls}">${v.text}</span></td>
      <td><button class="buy-btn" onclick="window.open('${p.url}','_blank')">View offer</button></td>
    </tr>`;
  });
}

applySort();
</script>

</body>
</html>