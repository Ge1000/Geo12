<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ThinSkin</title>

<style>
:root{
  --bg1:#0b1220;
  --bg2:#050914;
  --card:#111827cc;
  --green:#22c55e;
  --gold:#facc15;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --link:#93c5fd;
}
*{box-sizing:border-box}
body{
  margin:0;height:100vh;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;
  color:var(--text);
  display:flex;align-items:center;justify-content:center;
}
.card{
  width:92%;max-width:430px;
  background:var(--card);
  border-radius:22px;
  padding:30px 24px;
  text-align:center;
  backdrop-filter:blur(14px);
}
h1{margin:0;font-size:30px}
.challenge{font-size:20px;margin:22px 0}
button{
  border:none;border-radius:14px;
  padding:14px 26px;
  font-size:18px;font-weight:600;
  cursor:pointer;
}
.primary{background:var(--green);color:#052e16}
.secondary{background:#1f2937;color:#e5e7eb}
.gold{background:var(--gold);color:#422006}
.footer{
  margin-top:24px;
  font-size:15px;color:var(--muted);line-height:1.6;
}
.footer a{color:var(--link);text-decoration:underline;cursor:pointer}
.checkbox{
  display:flex;gap:10px;justify-content:center;align-items:center;
  font-size:18px;margin:20px 0;
}

/* MODAL */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center;
}
.modal-content{
  background:#020617;
  width:92%;max-width:540px;
  padding:26px;border-radius:18px;line-height:1.7;
}
.close{text-align:right;color:var(--link);cursor:pointer}
</style>
</head>

<body>

<div class="card" id="app">Loading…</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <div class="close" onclick="closeModal()">Close</div>
    <div id="modalText"></div>
  </div>
</div>

<script>
// ===================== 200+ CHALLENGES =====================
const challenges = [
  // Level 1–3
  "Drink a glass of water.","Make your bed.","No social media for 30 minutes.",
  "Wash your face with cold water.","Step outside for fresh air.",
  "Finish one small task.","Sit in silence for 2 minutes.","Stretch for 5 minutes.",
  "Clean one small area.","Write one sentence.",
  // Level 4–10
  "No social media for 1 hour.","Take a 10 minute walk.","Read 2 pages.",
  "Organize one thing.","Delay a craving by 10 minutes.","Stand up straight for 5 minutes.",
  "Breathe slowly for 3 minutes.","Do something uncomfortable but safe.",
  "Say no to one distraction.","Finish what you start today.",
  // Level 11–30
  "Cold water on face for 30 seconds (if safe).","Do 10 squats.",
  "Clean your phone screen.","No complaining today.","Drink water before coffee.",
  "Wake up 10 minutes earlier.","Put phone away during a meal.",
  "Walk without headphones for 5 minutes.","Tidy your workspace.",
  "Write 3 honest thoughts.",
  // Level 31–100
  "No social media until noon.","Cold shower 30 seconds if safe.",
  "Walk 15 minutes.","Read 5 pages.","Skip one unhealthy habit today.",
  "Finish a delayed task.","Sit alone quietly for 5 minutes.",
  "Drink 2 glasses of water.","Go to bed 15 minutes earlier.",
  "No phone first 30 minutes after waking.",
  // Level 101–200+
  ...Array.from({length:120},(_,i)=>`Discipline task #${i+101}`)
];

// ===================== STORAGE =====================
const today = new Date().toISOString().slice(0,10);
let data = JSON.parse(localStorage.getItem("thinskin") || '{"used":[],"lastDay":null,"todayDone":false,"premium":false}');

if(data.lastDay !== today){
  data.todayDone = false;
  data.lastDay = today;
}
localStorage.setItem("thinskin",JSON.stringify(data));

const app = document.getElementById("app");

// ===================== MODALS =====================
function openModal(type){
  document.getElementById("modalText").innerHTML =
    type==="privacy" ? `
      <h2>Privacy Policy</h2>
      <p>No accounts. No tracking. No analytics.</p>
      <p>All data stays locally on your device.</p>
    ` : `
      <h2>Disclaimer & Terms</h2>
      <p>This is an experimental self-discipline project.</p>
      <p>Not medical advice. Not therapy.</p>
      <p>Not mental health guidance.</p>
      <p>Not professional or AI advice.</p>
      <p>Use responsibly. No guarantees.</p>
    `;
  document.getElementById("modal").style.display="flex";
}
function closeModal(){document.getElementById("modal").style.display="none"}

// ===================== SHARE =====================
function shareApp(){
  if(navigator.share){
    navigator.share({title:"ThinSkin",url:location.href});
  } else {
    alert("Copy link and share manually.");
  }
}

// ===================== LOGIC =====================
function nextChallenge(){
  return challenges.find(c=>!data.used.includes(c))||null;
}

function renderDone(){
  app.innerHTML=`
    <h1>Done for today</h1>
    <div class="challenge">Come back tomorrow.</div>
    <button class="secondary" onclick="shareApp()">Share</button>
    <div class="footer">
      <a onclick="openModal('privacy')">Privacy</a> ·
      <a onclick="openModal('terms')">Disclaimer</a><br><br>
      Experimental project.<br>No medical or therapy advice.
    </div>
  `;
}

function renderChallenge(){
  const c = nextChallenge();
  if(!c){renderDone();return;}

  const locked = data.used.length>30 && !data.premium;

  app.innerHTML = locked ? `
    <h1>Premium</h1>
    <div class="challenge">Unlock higher levels</div>
    <button class="gold" onclick="unlock()">Unlock Premium</button>
  ` : `
    <h1>Today</h1>
    <div class="challenge">${c}</div>
    <label class="checkbox">
      <input type="checkbox" id="check">
      <span>Done for today</span>
    </label>
    <button class="primary" id="btn" disabled>Confirm</button>
    <button class="secondary" onclick="shareApp()">Share</button>
    <div class="footer">
      <a onclick="openModal('privacy')">Privacy</a> ·
      <a onclick="openModal('terms')">Disclaimer</a>
    </div>
  `;

  const check=document.getElementById("check");
  const btn=document.getElementById("btn");
  if(check) check.onchange=()=>btn.disabled=!check.checked;
  if(btn) btn.onclick=()=>{
    data.used.push(c);
    data.todayDone=true;
    localStorage.setItem("thinskin",JSON.stringify(data));
    renderDone();
  };
}

function unlock(){
  data.premium=true;
  localStorage.setItem("thinskin",JSON.stringify(data));
  renderChallenge();
}

data.todayDone ? renderDone() : renderChallenge();
</script>

</body>
</html>