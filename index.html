<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>OMNISCAN â€“ Meme Coins Noi REAL TREND</title>
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
<style>
body { background:#000; color:#0f0; font-family:monospace; padding:10px; }
h1 { color:#0ff; }
.signal { margin-bottom:15px; border-bottom:1px solid #0f0; padding-bottom:5px; }
</style>
</head>
<body>

<h1>OMNISCAN â€“ Meme Coins Noi (15m) REAL TREND</h1>
<div id="output">Se analizeazÄƒ piaÈ›a...</div>

<script>
// --- INIT OneSignal ---
window.OneSignal = window.OneSignal || [];
OneSignal.push(function() {
  OneSignal.init({
    appId: "YOUR_REAL_ONESIGNAL_APP_ID",
    notifyButton: { enable:false }
  });
});

// --- ANALIZÄ‚ MEME COINS BINANCE NOI ---
const binanceNewMemeSymbols = ["SHIBUSDT","DOGEUSDT","CAKEUSDT"]; // extinde lista cu meme noi Binance

async function analyzeBinanceMeme(symbol){
    const url = `https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=15m&limit=15`;
    const res = await fetch(url);
    const data = await res.json();
    const closes = data.map(c=>parseFloat(c[4]));
    const volumes = data.map(c=>parseFloat(c[5]));
    const avgVolume = volumes.slice(0,-1).reduce((a,b)=>a+b)/(volumes.length-1);
    const currentVolume = volumes[volumes.length-1];
    const currentPrice = closes[closes.length-1];

    let score=0;
    // Trend real 15m
    if(closes.length>=5){
        let trend=0;
        for(let i=closes.length-5;i<closes.length-1;i++){
            if(closes[i+1]>closes[i]) trend++;
        }
        score += trend*15; // maxim 60
    }
    if(currentVolume>avgVolume*1.5) score+=25;
    if(currentPrice>0) score+=15;

    return {symbol, score, price: currentPrice};
}

// --- ANALIZÄ‚ MEME COINS SOLANA NOI ---
async function fetchSolanaNewTokens(){
    try{
        const res = await fetch('https://api.dexscreener.com/latest/dex/tokens?chain=solana');
        const data = await res.json();
        // filtrÄƒm doar tokenuri noi cu volum È™i lichiditate minimÄƒ
        return data.pairs.filter(t=>t.baseToken.dayData.volumeUsd>1000 && parseFloat(t.liquidity)>5000)
                         .slice(0,50)
                         .map(t=>({
                             name:t.baseToken.name,
                             symbol:t.baseToken.symbol,
                             price:parseFloat(t.priceUsd),
                             prices15m:t.baseToken.priceData15m || [],
                             volume:parseFloat(t.baseToken.dayData.volumeUsd),
                             liquidity:parseFloat(t.liquidity)
                         }));
    }catch(e){console.error(e); return [];}
}

function analyzeSolanaToken(token){
    let score=0;
    // Trend real 15m
    if(token.prices15m.length>=5){
        const last5 = token.prices15m.slice(-5);
        let trend=0;
        for(let i=0;i<last5.length-1;i++){
            if(last5[i+1]>last5[i]) trend++;
        }
        score+=trend*10; // maxim 40
    }
    if(token.volume>1000) score+=30;
    if(token.liquidity>5000) score+=30;
    return {...token, score:Math.min(100,score)};
}

// --- RUN SCANNER ---
async function runScanner(){
    const output=document.getElementById("output");
    let signals=[];

    // Meme coins Binance noi
    for(const s of binanceNewMemeSymbols){
        try{
            const res = await analyzeBinanceMeme(s);
            if(res.score>=60) signals.push(res);
        }catch(e){console.error(e);}
    }

    // Meme coins Solana noi
    const solTokens = await fetchSolanaNewTokens();
    solTokens.forEach(t=>{
        const analyzed = analyzeSolanaToken(t);
        if(analyzed.score>=60) signals.push(analyzed);
    });

    if(signals.length===0){
        output.innerHTML="âš ï¸ Nicio oportunitate meme nouÄƒ validÄƒ â‰¥60% momentan.";
    }else{
        output.innerHTML=signals.map(s=>{
            OneSignal.push(function(){
                OneSignal.sendSelfNotification(
                    `ðŸŒ  Semnal Meme Nou: ${s.symbol}`,
                    `Score: ${s.score}% | Price: ${s.price}`,
                    'https://i.imgur.com/U4tV8aQ.png',
                    {url: window.location.href}
                );
            });
            return `<div class="signal">ðŸš€ ${s.symbol} | Score: ${s.score}% | Price: ${s.price}</div>`;
        }).join("");
    }
}

// --- RUN AUTOMATIC LA 1 MIN ---
runScanner();
setInterval(runScanner,60000);

</script>
</body>
</html>