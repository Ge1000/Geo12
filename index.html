<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BOMBO – Offer Integrity Check</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0f1220;
    color: #ffffff;
    padding: 20px;
  }
  h1 { margin-bottom: 4px; }
  .sub { color:#aaa; margin-bottom:20px; }

  button {
    padding: 10px 14px;
    background: #4f7cff;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  .box {
    margin-top: 20px;
    padding: 16px;
    background: #161a33;
    border-radius: 8px;
  }

  .green { color: #5dff9b; }
  .yellow { color: #ffd45d; }
  .red { color: #ff6b6b; }

  ul { margin-top: 10px; }
  li { margin-bottom: 6px; }

  footer {
    margin-top: 30px;
    font-size: 12px;
    color: #777;
  }
</style>
</head>

<body>

<h1>BOMBO</h1>
<div class="sub">Independent offer integrity check – no tracking, no cookies</div>

<button onclick="scan()">Scan current page</button>

<div id="result" class="box"></div>

<footer>
  Signals only. No financial, legal or purchase advice.
</footer>

<script>
function scan() {
  const text = document.body.innerText.toLowerCase();
  const html = document.body.innerHTML.toLowerCase();
  const url  = location.href.toLowerCase();

  let score = 100;
  const reasons = [];

  /* =========================
     R1 – DISCOUNT FĂRĂ BAZĂ
  ========================== */
  const hasDiscount =
    /-\d+%|\d+% off|save \d+%/.test(text);

  const hasOldPrice =
    /was \$|\bwas\b|\bbefore\b|<del|<s>/.test(html);

  if (hasDiscount && !hasOldPrice) {
    score -= 25;
    reasons.push("Discount shown without a verifiable reference price");
  }

  /* =========================
     R2 – URGENȚĂ ARTIFICIALĂ
  ========================== */
  const urgencyPatterns = [
    "ends today",
    "last chance",
    "only today",
    "hours left",
    "ending soon"
  ];

  if (urgencyPatterns.some(p => text.includes(p))) {
    score -= 20;
    reasons.push("Psychological urgency language detected");
  }

  /* =========================
     R3 – COUNTDOWN JS (heuristic)
  ========================== */
  if (html.includes("countdown") || html.includes("timer")) {
    score -= 20;
    reasons.push("Countdown timer detected (often used as pressure)");
  }

  /* =========================
     R4 – STOC FALS (digital)
  ========================== */
  const scarcity =
    /only \d+ left|limited spots|few remaining/.test(text);

  const digitalContext =
    /download|software|saas|license|access|online/.test(text);

  if (scarcity && digitalContext) {
    score -= 25;
    reasons.push("Artificial scarcity on digital product");
  }

  /* =========================
     R5 – SOCIAL PROOF SLAB
  ========================== */
  if (
    /10,000\+ users|rated 4\.9|trusted by/.test(text) &&
    !/reviews|testimonials|trustpilot|g2|capterra/.test(text)
  ) {
    score -= 10;
    reasons.push("Social proof claims without verifiable source");
  }

  /* =========================
     R6 – AFILIERE DETECTATĂ
  ========================== */
  if (
    url.includes("utm_") ||
    url.includes("aff") ||
    url.includes("ref=")
  ) {
    score -= 10;
    reasons.push("Affiliate tracking parameters detected");
  }

  /* =========================
     NORMALIZARE SCOR
  ========================== */
  score = Math.max(0, Math.min(100, score));

  let verdict = "HIGH INTEGRITY";
  let color = "green";

  if (score < 80) { verdict = "QUESTIONABLE"; color = "yellow"; }
  if (score < 50) { verdict = "MANIPULATIVE"; color = "red"; }

  document.getElementById("result").innerHTML = `
    <h2 class="${color}">Integrity Score: ${score}</h2>
    <h3 class="${color}">${verdict}</h3>
    ${
      reasons.length
        ? `<ul>${reasons.map(r => `<li>${r}</li>`).join("")}</ul>`
        : "<p>No major manipulation signals detected.</p>"
    }
  `;
}
</script>

</body>
</html>