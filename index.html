<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DealScope â€“ Universal Affiliate Scanner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:#0f1220;
  color:#fff;
  margin:0;
  padding:20px;
}

h1 { margin-bottom:5px; }
.subtitle { color:#aaa; margin-bottom:6px; }
.status { font-size:12px; color:#9ca3af; margin-bottom:15px; }

.controls {
  display:flex;
  gap:10px;
  margin:15px 0;
  flex-wrap:wrap;
}

select {
  padding:8px;
  border-radius:6px;
  border:none;
}

.stats {
  margin:15px 0;
  padding:14px;
  background:#161a33;
  border-radius:10px;
  display:none;
}

table {
  width:100%;
  border-collapse:collapse;
  background:#161a33;
  border-radius:12px;
  overflow:hidden;
}

th, td {
  padding:12px;
  border-bottom:1px solid #2a2f55;
  vertical-align:top;
}

th { background:#1d2245; }
tr:hover { background:#1b2050; }

.badge {
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  font-weight:700;
  display:inline-block;
}

.badge.green { background:#22c55e; color:#000; }
.badge.orange { background:#f97316; color:#000; }
.badge.red { background:#dc2626; }

.buy-btn {
  background:#22c55e;
  color:#000;
  border:none;
  padding:8px 14px;
  border-radius:6px;
  font-weight:700;
  cursor:pointer;
}

.why {
  font-size:12px;
  color:#cbd5f5;
  margin-top:6px;
}

.integrity {
  font-size:12px;
  margin-top:6px;
  color:#9ca3af;
}

footer {
  margin-top:30px;
  font-size:12px;
  color:#9ca3af;
  text-align:center;
  line-height:1.6;
}
</style>
</head>

<body>

<h1>DealScope</h1>
<div class="subtitle">Universal affiliate scanner Â· Deal integrity engine</div>
<div class="status">ðŸŸ¢ No accounts Â· No user tracking Â· Affiliate disclosure compliant (UK/EU)</div>

<div class="stats" id="stats"></div>

<div class="controls">
  <select id="sortSelect" onchange="applySort()">
    <option value="earn">Estimated affiliate relevance</option>
    <option value="discount">Best discount</option>
    <option value="commission">Commission rate</option>
    <option value="trust">Merchant trust</option>
  </select>

  <select id="currencySelect" onchange="setCurrency(this.value)">
    <option value="USD">USD $</option>
    <option value="EUR">EUR â‚¬</option>
    <option value="GBP">GBP Â£</option>
  </select>

  <select id="modeSelect" onchange="applySort()">
    <option value="v1">Integrity mode: Conservative</option>
    <option value="v2">Integrity mode: Advanced</option>
  </select>
</div>

<table>
<thead>
<tr>
  <th>Product</th>
  <th>Price</th>
  <th>Market</th>
  <th>Discount</th>
  <th>Integrity verdict</th>
  <th>Action</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

<footer>
<strong>Legal & transparency notice (UK/EU):</strong><br><br>

DealScope is an affiliate-based discovery and filtering tool.  
DealScope may earn a commission from merchants when users click affiliate links.  
Users never pay extra for using this website.<br><br>

Displayed prices, discounts and classifications are informational only and may not reflect real-time market conditions.  
DealScope does not guarantee accuracy, availability or pricing and does not provide financial, investment or purchasing advice.<br><br>

<strong>Deal Integrity Engine explanation:</strong><br>
Integrity verdicts are generated using internal, non-exhaustive criteria such as relative discount, merchant trust signals and campaign structure.  
They represent eligibility for promotion under DealScope rules, not factual claims about merchants or products.<br><br>

All purchasing decisions remain the sole responsibility of the user.
</footer>

<script>
/* ------------------ Admin ------------------ */
const isAdmin = new URLSearchParams(location.search).get("admin")==="1";
if(isAdmin) document.getElementById("stats").style.display="block";

/* ------------------ Currency ------------------ */
const rates={USD:1,EUR:0.92,GBP:0.79};
const symbols={USD:"$",EUR:"â‚¬",GBP:"Â£"};

let currency=localStorage.getItem("currency")||autoCurrency();
function autoCurrency(){
  const l=navigator.language||"";
  if(l.includes("en-GB")) return "GBP";
  if(l.match(/de|fr|it|es/)) return "EUR";
  return "USD";
}
function setCurrency(c){currency=c;localStorage.setItem("currency",c);applySort();}
document.getElementById("currencySelect").value=currency;
const fx=v=>(v*rates[currency]).toFixed(2);

/* ------------------ Data ------------------ */
let feed=[
 {name:"Nike Air Zoom Pegasus",price:89,market:129,store:"Nike",trust:95,commission:0.04,url:"https://nike.com"},
 {name:"Oversized Hoodie",price:39,market:69,store:"Zalando",trust:90,commission:0.08,url:"https://zalando.com"},
 {name:"Wireless Headphones",price:59,market:99,store:"Amazon",trust:92,commission:0.04,url:"https://amazon.com"},
 {name:"AI SEO Toolkit",price:49,market:99,store:"AppSumo",trust:80,commission:0.30,url:"https://appsumo.com"}
];

const discount=p=>Math.round((1-p.price/p.market)*100);
const earn=p=>p.price*p.commission;

/* ------------------ Integrity Engine ------------------ */
function integrity(p,mode){
  let reasons=[];
  if(discount(p)>=30) reasons.push("meaningful discount");
  if(p.trust>=85) reasons.push("established merchant");
  if(p.commission>=0.1) reasons.push("incentivized campaign");

  if(mode==="v1"){
    return reasons.length>=2
      ? {text:"PASS",cls:"green",why:reasons.join(", ")}
      : {text:"SKIP",cls:"red",why:"does not meet promotion criteria"};
  }

  if(mode==="v2"){
    if(reasons.length>=3)
      return {text:"PASS",cls:"green",why:reasons.join(", ")};
    if(reasons.length===2)
      return {text:"REVIEW",cls:"orange",why:reasons.join(", ")};
    return {text:"SKIP",cls:"red",why:"insufficient integrity signals"};
  }
}

/* ------------------ Render ------------------ */
function applySort(){
  const mode=document.getElementById("modeSelect").value;
  let list=[...feed];
  render(list,mode);
}

function render(list,mode){
  const tb=document.getElementById("tableBody");
  tb.innerHTML="";
  list.forEach(p=>{
    const iv=integrity(p,mode);
    tb.innerHTML+=`
    <tr>
      <td><b>${p.name}</b><br><small>${p.store}</small>
        <div class="integrity">Why: ${iv.why}</div>
      </td>
      <td>${symbols[currency]}${fx(p.price)}</td>
      <td>${symbols[currency]}${fx(p.market)}</td>
      <td><span class="badge green">-${discount(p)}%</span></td>
      <td><span class="badge ${iv.cls}">${iv.text}</span></td>
      <td><button class="buy-btn" onclick="window.open('${p.url}','_blank')">Buy</button></td>
    </tr>`;
  });
}

applySort();
</script>

</body>
</html>