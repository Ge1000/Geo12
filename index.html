<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Geo Nuclear Quick Pick 5.5 ðŸ’¥</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
body {font-family:Arial; background:#0f1220; color:#fff; padding:20px;}
h2 {text-align:center; color:#00ffea; margin-bottom:20px;}
#preview, #output {margin-top:20px;}
.match {
    display:inline-block;
    padding:10px 15px;
    margin:3px;
    border-radius:10px;
    min-width:120px;
    text-align:center;
    font-weight:bold;
    color:#000;
    font-size:14px;
}
input, button {padding:10px; margin:5px; cursor:pointer;}
</style>
</head>
<body>

<h2>ðŸ’¥ Geo Nuclear Quick Pick 5.5 Offline ðŸ’¥</h2>
<input type="file" id="imgInput" accept="image/*">
<button onclick="runOCR()">RuleazÄƒ analizÄƒ</button>
<button onclick="exportCSV()">Export CSV</button>

<h3>Preview OCR</h3>
<div id="preview"></div>

<h3>Value Bets Ã®n linie</h3>
<div id="output"></div>

<script>
let finalResults = [];
let seed = 987654;

// Seeded random pentru consistenÈ›Äƒ
function random(){var x=Math.sin(seed++)*10000; return x - Math.floor(x);}

// OCR + Parse
function runOCR(){
    let file=document.getElementById("imgInput").files[0];
    if(!file){alert("Alege poza"); return;}
    document.getElementById("preview").innerHTML="Se proceseazÄƒ OCR...";
    document.getElementById("output").innerHTML="";
    finalResults=[];
    Tesseract.recognize(file,'eng',{logger:m=>console.log(m)})
    .then(({data:{text}})=>{
        document.getElementById("preview").innerText=text;
        parseMatches(text);
    });
}

// Parse echipe
function parseMatches(text){
    const lines=text.split(/\n/);
    let matches=[];
    lines.forEach(line=>{
        let match=line.match(/([A-Za-z\s]+)\s*-\s*([A-Za-z\s]+)/);
        if(match){
            matches.push({home:match[1].trim(), away:match[2].trim()});
        }
    });
    if(matches.length===0){
        document.getElementById("output").innerHTML="<p>Nu s-au gÄƒsit meciuri.</p>";
        return;
    }
    matches.forEach(m=>getPrediction(m.home, m.away));
}

// Simulare probabilitÄƒÈ›i + calcul Edge
function getPrediction(home, away){
    const pH = (random()*0.4 + 0.3).toFixed(2);
    const pX = (random()*0.3).toFixed(2);
    const pA = (1 - pH - pX).toFixed(2);

    // Simulare cote implicite (poÈ›i ajusta dupÄƒ ligÄƒ/echipe)
    const oddH = (1/pH).toFixed(2);
    const oddX = (1/pX).toFixed(2);
    const oddA = (1/pA).toFixed(2);

    // Calcul Edge
    let edge = Math.max(pH*oddH -1, pX*oddX -1, pA*oddA -1);

    // DeterminÄƒ pick-ul doar dacÄƒ edge > 0
    let pick="", prob=0;
    if(edge>0){
        if(pH*oddH-1 === edge){ pick=home; prob=parseFloat(pH);}
        else if(pX*oddX-1 === edge){ pick="Draw"; prob=parseFloat(pX);}
        else { pick=away; prob=parseFloat(pA);}
        finalResults.push({match:home+" vs "+away, pick, pH, pX, pA, prob, edge});
    }

    renderResults();
}

// Culoare progresivÄƒ dupÄƒ probabilitate
function getColor(prob){
    if(prob>=0.7) return '#00ff00'; // verde
    if(prob>=0.5) return '#ffff33'; // galben
    return '#ff8000'; // portocaliu
}

// AfiÈ™are favorite Ã®n linie
function renderResults(){
    const output=document.getElementById("output");
    output.innerHTML="";
    if(finalResults.length===0){output.innerHTML="<p>Nu existÄƒ meciuri profitabile.</p>"; return;}
    finalResults.forEach(r=>{
        const div=document.createElement("div");
        div.className="match";
        div.style.background=getColor(r.prob);
        div.innerHTML=`${r.pick}`;
        output.appendChild(div);
    });
}

// Export CSV
function exportCSV(){
    if(finalResults.length===0) return;
    let csv="Match,Pick,P_H,P_X,P_A,Edge\n";
    finalResults.forEach(r=>{
        csv+=`${r.match},${r.pick},${r.pH},${r.pX},${r.pA},${r.edge.toFixed(2)}\n`;
    });
    const blob=new Blob([csv],{type:"text/csv"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="geo_valuebets_5.5.csv";
    a.click();
}
</script>

</body>
</html>