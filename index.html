<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ThinSkin</title>

<style>
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: radial-gradient(circle at top, #0f1c2e, #050b16);
    color: #fff;
    text-align: center;
    min-height: 100vh;
  }

  .screen {
    display: none;
    padding: 80px 20px;
  }

  .screen.active {
    display: block;
  }

  h1 {
    font-size: 40px;
    margin-bottom: 10px;
  }

  h2 {
    font-size: 28px;
    margin-bottom: 10px;
  }

  p {
    opacity: 0.7;
    max-width: 320px;
    margin: 0 auto 30px;
  }

  button {
    background: #22c55e;
    color: #000;
    border: none;
    padding: 16px 36px;
    font-size: 18px;
    border-radius: 14px;
    cursor: pointer;
  }

  button.locked {
    opacity: 0.4;
    pointer-events: none;
  }

  .box {
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 16px;
    padding: 20px;
    margin: 20px auto;
    max-width: 320px;
  }

  footer {
    opacity: 0.4;
    font-size: 12px;
    margin-top: 80px;
  }
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="screen active">
  <h1>ThinSkin</h1>
  <p>A private space for daily discipline.</p>
  <button onclick="start()">Start</button>
  <footer>
    This is a personal experimental project.<br>
    It does not provide advice or guarantees.
  </footer>
</div>

<!-- DAILY -->
<div id="daily" class="screen">
  <h2 id="dayTitle"></h2>
  <div class="box">
    <p id="challengeText"></p>
  </div>
  <label>
    <input type="checkbox" id="doneCheck" /> I did this today
  </label>
  <br><br>
  <button id="confirmBtn" class="locked">Confirm</button>
</div>

<!-- LOCKED -->
<div id="locked" class="screen">
  <h2>Done for today</h2>
  <p>Come back tomorrow.</p>
</div>

<!-- COMPLETED -->
<div id="completed" class="screen">
  <h2>Completed</h2>
  <p>You reached the end.<br>Most people don’t.</p>
  <button onclick="resetAll()">Restart</button>
  <footer>Progress resets by design.</footer>
</div>

<script>
const ALL_CHALLENGES = [
  "Wake up without checking your phone for 30 minutes.",
  "Do one uncomfortable task immediately.",
  "No sugar today.",
  "Write one honest sentence about yourself.",
  "Move your body for 10 minutes.",
  "Say no once today.",
  "Finish something small you’ve been avoiding.",
  "No complaining today.",
  "Sit in silence for 5 minutes.",
  "Go to bed earlier than usual."
];

let state = JSON.parse(localStorage.getItem("thinskin")) || {
  used: [],
  today: null,
  lastDate: null,
  completedToday: false
};

const screens = {
  home, daily, locked, completed
};

function show(name) {
  Object.values(screens).forEach(s => s.classList.remove("active"));
  screens[name].classList.add("active");
}

function today() {
  return new Date().toDateString();
}

function save() {
  localStorage.setItem("thinskin", JSON.stringify(state));
}

function start() {
  if (state.completedToday && state.lastDate === today()) {
    show("locked");
    return;
  }
  loadChallenge();
}

function loadChallenge() {
  const remaining = ALL_CHALLENGES.filter(c => !state.used.includes(c));

  if (remaining.length === 0) {
    show("completed");
    return;
  }

  if (!state.today) {
    state.today = remaining[Math.floor(Math.random() * remaining.length)];
    state.completedToday = false;
  }

  dayTitle.textContent = "Day " + (state.used.length + 1);
  challengeText.textContent = state.today;
  doneCheck.checked = false;
  confirmBtn.classList.add("locked");

  show("daily");
}

doneCheck.onchange = () => {
  confirmBtn.classList.toggle("locked", !doneCheck.checked);
};

confirmBtn.onclick = () => {
  state.used.push(state.today);
  state.today = null;
  state.completedToday = true;
  state.lastDate = today();
  save();
  show("locked");
};

function resetAll() {
  localStorage.removeItem("thinskin");
  location.reload();
}
</script>

</body>
</html>