<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Geo Nuclear Quick Pick 5.3 Offline ðŸ’¥</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
body {font-family:Arial; background:#0f1220; color:#fff; padding:20px;}
h2 {text-align:center; color:#00ffea;}
#preview, #output {margin-top:20px;}
.match {background:#1f263d; margin-top:10px; padding:15px; border-left:5px solid #00ffea;}
.value {border-left:5px solid #00ff00;}
input, button {padding:10px; margin:5px; cursor:pointer;}
</style>
</head>
<body>

<h2>ðŸ’¥ Geo Nuclear Quick Pick 5.3 Offline ðŸ’¥</h2>
<input type="file" id="imgInput" accept="image/*">
<button onclick="runOCR()">RuleazÄƒ analizÄƒ</button>
<button onclick="exportCSV()">Export CSV</button>

<h3>Preview OCR</h3>
<div id="preview"></div>

<h3>Meciuri Profitabile</h3>
<div id="output"></div>

<script>
let finalResults = [];

// Seeded random pentru consistenÈ›Äƒ
let seed = 123456;
function random() {
  var x = Math.sin(seed++) * 10000;
  return x - Math.floor(x);
}

// OCR + Parse
function runOCR(){
    let file=document.getElementById("imgInput").files[0];
    if(!file){alert("Alege poza"); return;}
    document.getElementById("preview").innerHTML="Se proceseazÄƒ OCR...";
    document.getElementById("output").innerHTML="";
    finalResults=[];

    Tesseract.recognize(file,'eng',{logger:m=>console.log(m)})
    .then(({data:{text}})=>{
        document.getElementById("preview").innerText=text;
        parseMatches(text);
    });
}

// Parse echipe
function parseMatches(text){
    const lines=text.split(/\n/);
    let matches=[];
    lines.forEach(line=>{
        let match=line.match(/([A-Za-z\s]+)\s*-\s*([A-Za-z\s]+)/);
        if(match){
            const home=match[1].trim();
            const away=match[2].trim();
            matches.push({home, away});
        }
    });
    if(matches.length===0){
        document.getElementById("output").innerHTML="<p>Nu s-au gÄƒsit meciuri.</p>";
        return;
    }

    matches.forEach(m=>getPrediction(m.home, m.away));
}

// Simulare probabilitÄƒÈ›i (consistent)
function getPrediction(home, away){
    const pH = (random()*0.4 + 0.3).toFixed(2);
    const pX = (random()*0.3).toFixed(2);
    const pA = (1 - pH - pX).toFixed(2);

    let pick="";
    if(pH>pX && pH>pA) pick=home+" win";
    else if(pX>pH && pX>pA) pick="Draw";
    else pick=away+" win";

    finalResults.push({match:home+" vs "+away, pick, pH, pX, pA});
    renderResults();
}

// AfiÈ™are rezultate
function renderResults(){
    const output=document.getElementById("output");
    output.innerHTML="";
    if(finalResults.length===0){output.innerHTML="<p>Nu existÄƒ value bet-uri.</p>"; return;}
    finalResults.forEach(r=>{
        const div=document.createElement("div");
        div.className="match value";
        div.innerHTML=`<strong>${r.pick}</strong><br>
                       ${r.match}<br>
                       Probabilitate: ${r.pH}/${r.pX}/${r.pA}`;
        output.appendChild(div);
    });
}

// Export CSV
function exportCSV(){
    if(finalResults.length===0) return;
    let csv="Match,Pick,P_H,P_X,P_A\n";
    finalResults.forEach(r=>{
        csv+=`${r.match},${r.pick},${r.pH},${r.pX},${r.pA}\n`;
    });
    const blob=new Blob([csv],{type:"text/csv"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="geo_valuebets_offline.csv";
    a.click();
}
</script>

</body>
</html>